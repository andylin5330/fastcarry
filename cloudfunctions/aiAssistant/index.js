const cloud = require('wx-server-sdk')
cloud.init({ env: cloud.DYNAMIC_CURRENT_ENV })

exports.main = async (event, context) => {
    const { text } = event;

    // Normalize text for better matching
    const normalizedText = text.toLowerCase().trim();

    const faqs = [
        {
            keywords: ['å–æ¶ˆ', 'é€€æ¬¾', 'é€€å•', 'ä¸æƒ³è¦'],
            reply: 'ðŸ“¦ **è®¢å•å–æ¶ˆ/é€€æ¬¾æµç¨‹**\n\næ‚¨å¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š\n1. æ‰“å¼€"æˆ‘çš„"é¡µé¢\n2. é€‰æ‹©"æˆ‘å¯„é€çš„"æˆ–"æˆ‘å‘å¸ƒçš„"\n3. æ‰¾åˆ°å¯¹åº”è®¢å•\n4. ç‚¹å‡»"å–æ¶ˆè®¢å•"æˆ–"ç”³è¯·é€€æ¬¾"\n\nâš ï¸ æ³¨æ„ï¼šå·²å‘è´§è®¢å•å¯èƒ½æ— æ³•å–æ¶ˆï¼Œè¯·åŠæ—¶è”ç³»å¸¦ç‰©äººåå•†ã€‚'
        },
        {
            keywords: ['è¿ç¦å“', 'ç¦è¿', 'ä¸èƒ½å¸¦', 'ç¦æ­¢', 'é™åˆ¶ç‰©å“', 'ä»€ä¹ˆä¸èƒ½'],
            reply: 'ðŸš« **è¿ç¦å“æ¸…å•**\n\nä»¥ä¸‹ç‰©å“ä¸¥ç¦æºå¸¦ï¼š\nâ€¢ æ˜“ç‡ƒæ˜“çˆ†ç‰©å“ï¼ˆæ‰“ç«æœºã€çƒŸèŠ±ç­‰ï¼‰\nâ€¢ ç®¡åˆ¶åˆ€å…·åŠå±é™©æ­¦å™¨\nâ€¢ æ¯’å“åŠå¸æ¯’å·¥å…·\nâ€¢ æ´»ä½“åŠ¨æ¤ç‰©åŠå…¶åˆ¶å“\nâ€¢ æœªç»æ£€ç–«çš„é£Ÿå“\nâ€¢ ä¾µæƒç›—ç‰ˆç‰©å“\n\nè¯¦ç»†æ¸…å•è¯·å‚è€ƒå›½å®¶ç›¸å…³æ³•å¾‹æ³•è§„ã€‚å¦‚æœ‰ç–‘é—®è¯·è”ç³»å®¢æœç¡®è®¤ã€‚'
        },
        {
            keywords: ['å®‰å…¨', 'é è°±', 'å¯é ', 'æ”¯ä»˜', 'ä¿éšœ', 'æ‹…ä¿'],
            reply: 'ðŸ”’ **å¹³å°å®‰å…¨ä¿éšœ**\n\nFastCarry ä¸ºæ‚¨æä¾›å¤šé‡ä¿éšœï¼š\nâœ… æ‹…ä¿äº¤æ˜“ï¼šèµ„é‡‘ç”±å¹³å°æ‰˜ç®¡\nâœ… ç¡®è®¤æ”¶è´§åŽå†ç»“ç®—ç»™å¸¦ç‰©äºº\nâœ… å®žåè®¤è¯æœºåˆ¶\nâœ… è®¢å•å…¨ç¨‹è¿½è¸ª\n\nâš ï¸ è¯·åŠ¡å¿…åœ¨å¹³å°å†…äº¤æ˜“ï¼Œåˆ‡å‹¿ç§ä¸‹è½¬è´¦ï¼'
        },
        {
            keywords: ['ä»·æ ¼', 'é‚®è´¹', 'è¿è´¹', 'å¤šå°‘é’±', 'æ”¶è´¹', 'è´¹ç”¨'],
            reply: 'ðŸ’° **è¿è´¹è¯´æ˜Ž**\n\nè¿è´¹è®¡ç®—æ–¹å¼ï¼š\nâ€¢ ç”±å¯„é€äººå’Œå¸¦ç‰©äººåå•†ç¡®å®š\nâ€¢ ç³»ç»Ÿä¼šæ ¹æ®é‡é‡å’Œè·ç¦»æä¾›å‚è€ƒä»·\nâ€¢ ç‰¹æ®Šç‰©å“å¯èƒ½éœ€è¦é¢å¤–è´¹ç”¨\n\nðŸ’¡ å»ºè®®ï¼šé€‰æ‹©ä¿¡èª‰åº¦é«˜çš„å¸¦ç‰©äººï¼Œä»·æ ¼åˆç†ä¸”æ›´æœ‰ä¿éšœã€‚'
        },
        {
            keywords: ['æµç¨‹', 'æ€Žä¹ˆç”¨', 'å¦‚ä½•ä½¿ç”¨', 'æ“ä½œ', 'æ­¥éª¤', 'æ€Žä¹ˆå‘å¸ƒ'],
            reply: 'ðŸ“‹ **ä½¿ç”¨æµç¨‹**\n\n**å¯„é€æ–¹ï¼š**\n1. å‘å¸ƒå¯„é€éœ€æ±‚æˆ–æœç´¢åˆé€‚è¡Œç¨‹\n2. ä¸Žå¸¦ç‰©äººåå•†å¹¶ä¸‹å•\n3. æ”¯ä»˜è¿è´¹åˆ°å¹³å°æ‰˜ç®¡\n4. å°†ç‰©å“äº¤ç»™å¸¦ç‰©äºº\n5. ç¡®è®¤æ”¶è´§åŽå®Œæˆäº¤æ˜“\n\n**å¸¦ç‰©æ–¹ï¼š**\n1. å‘å¸ƒè¡Œç¨‹ä¿¡æ¯\n2. æŽ¥æ”¶å¯„é€éœ€æ±‚\n3. ç¡®è®¤æŽ¥å•å¹¶æ”¶å–ç‰©å“\n4. å°†ç‰©å“å¸¦åˆ°ç›®çš„åœ°\n5. ç­‰å¾…å¯¹æ–¹ç¡®è®¤æ”¶è´§åŽæ”¶æ¬¾'
        },
        {
            keywords: ['æ—¶æ•ˆ', 'å¤šä¹…', 'å¤šé•¿æ—¶é—´', 'ä»€ä¹ˆæ—¶å€™åˆ°'],
            reply: 'â° **é…é€æ—¶æ•ˆ**\n\nå…·ä½“æ—¶æ•ˆå–å†³äºŽï¼š\nâ€¢ å¸¦ç‰©äººçš„è¡Œç¨‹å®‰æŽ’\nâ€¢ èˆªç­æ—¶åˆ»å’Œå»¶è¯¯æƒ…å†µ\nâ€¢ ç›®çš„åœ°è·ç¦»\n\nå»ºè®®åœ¨ä¸‹å•å‰ä¸Žå¸¦ç‰©äººç¡®è®¤é¢„è®¡é€è¾¾æ—¶é—´ã€‚æ‚¨å¯ä»¥åœ¨è®¢å•è¯¦æƒ…ä¸­æŸ¥çœ‹ç‰©æµçŠ¶æ€ã€‚'
        },
        {
            keywords: ['æŠ•è¯‰', 'ä¸¾æŠ¥', 'çº çº·', 'é—®é¢˜'],
            reply: 'âš–ï¸ **æŠ•è¯‰ä¸Žçº çº·å¤„ç†**\n\nå¦‚é‡é—®é¢˜è¯·ï¼š\n1. å…ˆä¸Žå¯¹æ–¹å‹å¥½æ²Ÿé€šåå•†\n2. å¦‚æ— æ³•è§£å†³ï¼Œè”ç³»å¹³å°å®¢æœä»‹å…¥\n3. æä¾›è®¢å•å·å’Œç›¸å…³è¯æ®\n\nå¹³å°ä¼šåœ¨24å°æ—¶å†…å“åº”æ‚¨çš„è¯‰æ±‚ã€‚'
        },
        {
            keywords: ['ç™»å½•', 'æ³¨å†Œ', 'è´¦å·', 'å¯†ç ', 'å¿˜è®°'],
            reply: 'ðŸ‘¤ **è´¦å·ç›¸å…³**\n\nâ€¢ æœ¬å¹³å°ä½¿ç”¨å¾®ä¿¡ä¸€é”®ç™»å½•\nâ€¢ æ— éœ€å•ç‹¬æ³¨å†Œè´¦å·\nâ€¢ ä¸ªäººä¿¡æ¯å¯åœ¨"æˆ‘çš„"é¡µé¢ä¿®æ”¹\n\nå¦‚é‡ç™»å½•é—®é¢˜ï¼Œè¯·å°è¯•ï¼š\n1. é€€å‡ºå¾®ä¿¡é‡æ–°è¿›å…¥\n2. æ¸…é™¤å°ç¨‹åºç¼“å­˜\n3. è”ç³»å®¢æœååŠ©å¤„ç†'
        },
        {
            keywords: ['ä½ å¥½', 'åœ¨å—', 'hi', 'hello', 'æ‚¨å¥½'],
            reply: 'æ‚¨å¥½ï¼æˆ‘æ˜¯ FastCarry æ™ºèƒ½å®¢æœ ðŸ¤–\n\næˆ‘å¯ä»¥å¸®æ‚¨è§£ç­”ä»¥ä¸‹é—®é¢˜ï¼š\nâ€¢ è®¢å•å–æ¶ˆ/é€€æ¬¾\nâ€¢ è¿ç¦å“æŸ¥è¯¢\nâ€¢ æ”¯ä»˜å®‰å…¨\nâ€¢ è¿è´¹è¯´æ˜Ž\nâ€¢ ä½¿ç”¨æµç¨‹\nâ€¢ æ—¶æ•ˆæŸ¥è¯¢\n\nè¯·ç›´æŽ¥æè¿°æ‚¨çš„é—®é¢˜ï¼Œæˆ‘ä¼šå°½åŠ›å¸®åŠ©æ‚¨ï¼'
        }
    ];

    let reply = "ðŸ¤” æŠ±æ­‰ï¼Œæˆ‘æš‚æ—¶æ— æ³•ç†è§£æ‚¨çš„é—®é¢˜ã€‚\n\næ‚¨å¯ä»¥å°è¯•è¯¢é—®ï¼š\nâ€¢ å¦‚ä½•å–æ¶ˆè®¢å•ï¼Ÿ\nâ€¢ ä»€ä¹ˆä¸œè¥¿ä¸èƒ½å¸¦ï¼Ÿ\nâ€¢ æ”¯ä»˜å®‰å…¨å—ï¼Ÿ\nâ€¢ è¿è´¹æ€Žä¹ˆç®—ï¼Ÿ\nâ€¢ æ€Žä¹ˆä½¿ç”¨å¹³å°ï¼Ÿ\n\næˆ–ç›´æŽ¥è¾“å…¥å…³é”®è¯ï¼Œå¦‚ï¼šé€€æ¬¾ã€è¿ç¦å“ã€å®‰å…¨ã€ä»·æ ¼ã€æµç¨‹ç­‰ã€‚";

    for (const faq of faqs) {
        if (faq.keywords.some(k => normalizedText.includes(k))) {
            reply = faq.reply;
            break;
        }
    }

    return {
        reply
    };
}
