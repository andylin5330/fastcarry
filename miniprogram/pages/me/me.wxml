<block wx:if="{{userInfo==null}}">
  <!-- 显示手机号快捷登录和其他手机号登录 -->
  <view class="container1">
    <view class="main">
      <view class="icon-view">
        <!-- 应用图标 -->
      </view>
    </view>
    <van-cell-group title="完善资料">
      <van-cell title="昵称">
        <input type="nickname" class="nickname-input" placeholder="请输入昵称" bindblur="onNicknameChange" bindinput="onNicknameChange" value="{{nickName}}" />
      </van-cell>
      <van-cell>
        <button type="warn" open-type="chooseAvatar" bindchooseavatar="getAvatar">授权登录</button>
      </van-cell>
    </van-cell-group>

    <!-- 用户协议同意 -->
    <view class="agreement-container">
      <checkbox class="checkbox" checked="{{agreed}}" bindtap="handleAgreeChange"></checkbox>
      <text class="agreement-text">我已阅读并同意</text>
      <navigator url="" class="agreement-link">《用户协议》</navigator>
    </view>
  </view>


</block>
<block wx:else>
  <view class="container profile-container">
    <!-- Header Card -->
    <view class="header-card">
      <view class="user-info">
        <van-image width="120rpx" height="120rpx" src="{{avatarUrl}}" round fit="cover" custom-class="avatar-shadow" />
        <view class="text-info">
          <view class="user-name">{{userInfo.name}}</view>
          <view class="user-id" bindtap="handleCopyID">ID: {{userInfo.uid || '221526'}}</view>
        </view>
      </view>
    </view>

    <!-- Stats Grid -->
    <view class="stats-card">
      <van-grid column-num="4" border="{{ false }}">
        <van-grid-item use-slot>
          <view class="stat-value">{{userInfo.score || 0}}</view>
          <view class="stat-label">积分</view>
        </van-grid-item>
        <van-grid-item use-slot>
          <view class="stat-value">0</view>
          <view class="stat-label">优惠券</view>
        </van-grid-item>
        <van-grid-item use-slot>
          <view class="stat-value">0</view>
          <view class="stat-label">关注</view>
        </van-grid-item>
        <van-grid-item use-slot>
          <view class="stat-value">0</view>
          <view class="stat-label">足迹</view>
        </van-grid-item>
      </van-grid>
    </view>

    <!-- Menu List -->
    <view class="menu-card">
      <van-cell-group inset>
        <van-cell title="地址管理" is-link icon="location-o" />
        <van-cell title="积分兑换记录" is-link icon="gold-coin-o" />
        <van-cell title="我参加的活动" is-link icon="flag-o" />
        <van-cell title="分享应用" is-link icon="share-o" />
        <van-cell title="清除缓存" is-link border="{{ false }}" bind:click="handleClearCache" icon="delete-o" />
      </van-cell-group>
    </view>

    <view class="logout-area">
      <van-button type="default" block round custom-style="color: #ee0a24;" bind:click="handleLogout">退出登录</van-button>
    </view>

  </view>
</block>