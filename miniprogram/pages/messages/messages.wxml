<view class="container">
  <van-cell-group border="{{ false }}">
    <!-- System AI Chat Item -->
    <van-cell 
      title="AI 智能客服" 
      label="{{ aiLastMessage || '点击开始咨询常见问题' }}" 
      center 
      clickable 
      bind:click="goToAiChat"
    >
      <view slot="icon" style="margin-right: 20rpx;">
        <van-image width="100rpx" height="100rpx" src="/images/ai_avatar.png" round />
      </view>
      <view slot="right-icon">
        <van-tag type="danger" round wx:if="{{ aiUnreadCount > 0 }}">{{ aiUnreadCount }}</van-tag>
      </view>
    </van-cell>

    <!-- User Conversations -->
    <block wx:for="{{ conversations }}" wx:key="_id">
      <van-cell 
        title="{{ item.otherPartyName }}" 
        label="{{ item.lastMessage.content }}" 
        center 
        clickable 
        data-id="{{ item._id }}"
        bind:click="goToChat"
      >
        <view slot="icon" style="margin-right: 20rpx;">
          <van-image width="100rpx" height="100rpx" src="{{ item.otherPartyAvatar || '/images/default_avatar.png' }}" round />
        </view>
        <view slot="right-icon">
          <view class="time-label">{{ item.lastMessageTime }}</view>
          <van-tag type="danger" round wx:if="{{ item.unreadCount > 0 }}">{{ item.unreadCount }}</van-tag>
        </view>
      </van-cell>
    </block>
  </van-cell-group>

  <!-- Empty State -->
  <view class="empty-container" wx:if="{{ conversations.length === 0 && !aiLastMessage }}">
    <view class="empty-text">暂无消息</view>
  </view>
</view>
